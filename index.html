<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF OCR Example</title>
</head>
<body>
    <h1>PDF OCR Example</h1>
    <input type="file" accept=".pdf" id="pdfInput">
    <div id="result"></div>
    <div id="loading" style="display: none;">Processing...</div>
    
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/ocr"></script>
    <script>
        async function performOCR(pdfFile) {
            const ocrModel = await tf.ocr.load();
            
            const reader = new FileReader();
            reader.onload = async function(event) {
                const pdfData = new Uint8Array(event.target.result);
                const pdfArrayBuffer = pdfData.buffer;
                const pdfBlob = new Blob([pdfArrayBuffer], { type: 'application/pdf' });
                const pdfUrl = URL.createObjectURL(pdfBlob);
                
                const pdfImageElement = document.createElement('img');
                pdfImageElement.src = pdfUrl;
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '';
                resultDiv.appendChild(pdfImageElement);
                
                const result = await ocrModel.recognize(pdfImageElement);
                
                result.lines.forEach(line => {
                    const text = line.text;
                    const confidence = line.confidence;
                    
                    const lineElement = document.createElement('p');
                    lineElement.textContent = `Text: ${text} (Confidence: ${confidence})`;
                    
                    resultDiv.appendChild(lineElement);
                });
                
                URL.revokeObjectURL(pdfUrl);
                document.getElementById('loading').style.display = 'none';
            };
            reader.readAsArrayBuffer(pdfFile);
        }
        
        document.getElementById('pdfInput').addEventListener('change', async (event) => {
            const pdfFile = event.target.files[0];
            if (pdfFile) {
                document.getElementById('loading').style.display = 'block';
                await performOCR(pdfFile);
            }
        });
    </script>
</body>
</html>
